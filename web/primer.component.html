<div class="html" style="background-color: rgb(76, 75, 87);">
    <div class="body" style="background-color: rgb(76, 75, 87); position: static; overflow: visible;">
        <div id=app class=container>
            <div id=plugins></div>
            <div>
                <div class=clearfloat>
                    <div class="navbar el-row">
                        <div class="el-col el-col-24 el-col-xs-6 el-col-sm-5 el-col-md-5 el-col-lg-4">
                            <div class="ui-logo navbar-logo"></div>
                        </div>
                        <div class="el-col el-col-24 el-col-xs-13 el-col-sm-15 el-col-md-14 el-col-lg-15">
                            <ul class="navbar-ul clearfloat">
                                <li><span class=ui-local-icon></span>Локальная настройка</li>
                                <li id=houseHoldEnable><span class=ui-household-icon></span>Абонентская настройка</li>
                                <li><span class=ui-network-icon></span>Настройка сети</li>
                                <li id=logEnable class=active><span class=ui-log-icon></span>Управление журналом
                            </ul>
                        </div>
                        <div class="el-col el-col-24 el-col-xs-0 el-col-sm-1 el-col-md-1 el-col-lg-1">
                            <div class="el-col el-col-24">
                                <div class=el-dropdown>
                                    <div class=navbar-drop-lang>
                                        <p class=navbar-drop-lang-text>Russian</p>
                                        <p class=ui-Navbar-icon-lang></p>
                                    </div>
                                    <ul class="el-dropdown-menu navbar-drop" style=display:none></ul>
                                </div>
                            </div>
                        </div>
                        <div
                            class="fn-height52 el-col el-col-24 el-col-offset-2 el-col-xs-1 el-col-sm-1 el-col-md-1 el-col-lg-1">
                            <div class="el-col el-col-24 el-col-xs-12 el-col-sm-12 el-col-md-12 el-col-lg-12">
                                <p class=ui-user></p>
                            </div>
                            <div class="el-col el-col-24 el-col-xs-12 el-col-sm-12 el-col-md-12 el-col-lg-12">
                                <p class=ui-home></p>
                            </div>
                        </div>
                        <div class="navbar-drop-col el-col el-col-24 el-col-xs-1 el-col-sm-1 el-col-md-1 el-col-lg-1">
                            <div class=el-dropdown>
                                <div class=navbar-drop-text>
                                    <p class=ui-resetsystem></p>
                                    <p class=ui-Navbar-icon></p>
                                </div>
                                <ul class="el-dropdown-menu navbar-drop" style=display:none> </ul>
                            </div>
                        </div>
                    </div>
                    <div class=el-dialog__wrapper style=display:none></div>
                    <div class=el-dialog__wrapper style=display:none></div>
                </div>
                <div class="fn-mart30 el-row" style=margin-left:-10px;margin-right:-10px>
                    <div class="ui-offset el-col el-col-24 el-col-xs-6 el-col-sm-5 el-col-md-4 el-col-lg-3"
                        style=padding-left:10px;padding-right:10px>
                        <div style=height:100%>
                            <ul class="el-menu el-menu-vertical-demo background-menu">
                                <li class="el-menu-item item is-active" style=padding-left:20px>Вызов
                                <li class="el-menu-item item" style=padding-left:20px>Разблок.
                                <li class="el-menu-item item" style=padding-left:20px>Журнал
                            </ul>
                        </div>
                    </div>
                    <div class="el-col el-col-24 el-col-xs-16 el-col-sm-15 el-col-md-19 el-col-lg-18"
                        style=padding-left:10px;padding-right:10px>
                        <div class=child-view>
                            <div class=el-row>
                                <div class="el-col el-col-24 el-col-xs-23 el-col-sm-20 el-col-md-24 el-col-lg-24">
                                    <div class="ui-div fn-mart30">
                                        <div class="el-table el-table--fit el-table--striped el-table--enable-row-hover el-table--enable-row-transition"
                                            style=width:100%;height:400px>
                                            <div class="hidden-columns sf-hidden"> </div>
                                            <div class=el-table__header-wrapper>
                                                <table class=el-table__header style=width:1374px cellspacing=0
                                                    cellpadding=0 border=0>
                                                    <colgroup>
                                                        <col name=el-table_1_column_33 width=100>
                                                        <col name=el-table_1_column_34 width=200>
                                                        <col name=el-table_1_column_35 width=265>
                                                        <col name=el-table_1_column_36 width=264>
                                                        <col name=el-table_1_column_37 width=264>
                                                        <col name=el-table_1_column_38 width=264>
                                                        <col name=gutter width=17></colgroup>
                                                    <thead>
                                                        <tr>
                                                            <th colspan=1 rowspan=1
                                                                class="el-table_1_column_33 is-center is-leaf">
                                                                <div class=cell>№</div></th>
                                                            <th colspan=1 rowspan=1
                                                                class="el-table_1_column_34 is-center is-leaf">
                                                                <div class=cell>Тип вызова</div></th>
                                                            <th colspan=1 rowspan=1
                                                                class="el-table_1_column_35 is-center is-leaf">
                                                                <div class=cell>№ комнаты</div></th>
                                                            <th colspan=1 rowspan=1
                                                                class="el-table_1_column_36 is-center is-leaf">
                                                                <div class=cell>Время начала</div></th>
                                                            <th colspan=1 rowspan=1
                                                                class="el-table_1_column_37 is-center is-leaf">
                                                                <div class=cell>Время разговора (мин.)</div></th>
                                                            <th colspan=1 rowspan=1
                                                                class="el-table_1_column_38 is-center is-leaf">
                                                                <div class=cell>Конечн. сост.</div></th>
                                                            <th class=gutter style=width:17px></th>
                                                            </tr>
                                                            </thead>
                                                </table>
                                            </div>
                                            <div class=el-table__body-wrapper style=height:359px>
                                                <table class=el-table__body style=width:1357px cellspacing=0
                                                    cellpadding=0 border=0>
                                                    <colgroup>
                                                        <col name=el-table_1_column_33 width=100>
                                                        <col name=el-table_1_column_34 width=200>
                                                        <col name=el-table_1_column_35 width=265>
                                                        <col name=el-table_1_column_36 width=264>
                                                        <col name=el-table_1_column_37 width=264>
                                                        <col name=el-table_1_column_38 width=264>
                                                        </colgroup>
                                                    <tbody>
                                                        <tr class=el-table__row>
                                                            <td class="el-table_1_column_33 is-center">
                                                                <div class=cell>1</div></td>
                                                            <td class="el-table_1_column_34 is-center">
                                                                <div class=cell>Входящ.</div></td>
                                                            <td class="el-table_1_column_35 is-center">
                                                                <div class=cell>510001</div></td>
                                                            <td class="el-table_1_column_36 is-center">
                                                                <div class=cell>2022-08-31 18:04:37</div></td>
                                                            <td class="el-table_1_column_37 is-center">
                                                                <div class=cell>00:11</div></td>
                                                            <td class="el-table_1_column_38 is-center">
                                                                <div class=cell>Полученн.</div></td>
                                                            <td class=gutter></td></tr>
                                                        <tr class="el-table__row el-table__row--striped">
                                                            <td class="el-table_1_column_33 is-center">
                                                                <div class=cell>2</div></td>
                                                            <td class="el-table_1_column_34 is-center">
                                                                <div class=cell>Входящ.</div></td>
                                                            <td class="el-table_1_column_35 is-center">
                                                                <div class=cell>6661</div></td>
                                                            <td class="el-table_1_column_36 is-center">
                                                                <div class=cell>2022-08-31 18:04:18</div></td>
                                                            <td class="el-table_1_column_37 is-center">
                                                                <div class=cell>00:10</div></td>
                                                            <td class="el-table_1_column_38 is-center">
                                                                <div class=cell>Полученн.</div></td>
                                                            <td class=gutter></td></tr>
                                                        <tr class=el-table__row>
                                                            <td class="el-table_1_column_33 is-center">
                                                                <div class=cell>3</div></td>
                                                            <td class="el-table_1_column_34 is-center">
                                                                <div class=cell>Входящ.</div></td>
                                                            <td class="el-table_1_column_35 is-center">
                                                                <div class=cell>6661</div></td>
                                                            <td class="el-table_1_column_36 is-center">
                                                                <div class=cell>2022-08-31 18:04:00</div></td>
                                                            <td class="el-table_1_column_37 is-center">
                                                                <div class=cell>00:04</div></td>
                                                            <td class="el-table_1_column_38 is-center">
                                                                <div class=cell>Полученн.</div></td>
                                                            <td class=gutter></td></tr>
                                                        <tr class="el-table__row el-table__row--striped">
                                                            <td class="el-table_1_column_33 is-center">
                                                                <div class=cell>4</div></td>
                                                            <td class="el-table_1_column_34 is-center">
                                                                <div class=cell>Входящ.</div></td>
                                                            <td class="el-table_1_column_35 is-center">
                                                                <div class=cell>6661</div></td>
                                                            <td class="el-table_1_column_36 is-center">
                                                                <div class=cell>2022-08-31 18:01:05</div></td>
                                                            <td class="el-table_1_column_37 is-center">
                                                                <div class=cell>00:09</div></td>
                                                            <td class="el-table_1_column_38 is-center">
                                                                <div class=cell>Полученн.</div></td>
                                                            <td class=gutter></td></tr>
                                                        <tr class=el-table__row>
                                                            <td class="el-table_1_column_33 is-center">
                                                                <div class=cell>5</div></td>
                                                            <td class="el-table_1_column_34 is-center">
                                                                <div class=cell>Входящ.</div></td>
                                                            <td class="el-table_1_column_35 is-center">
                                                                <div class=cell>6661</div></td>
                                                            <td class="el-table_1_column_36 is-center">
                                                                <div class=cell>2022-08-31 18:00:37</div></td>
                                                            <td class="el-table_1_column_37 is-center">
                                                                <div class=cell>00:11</div></td>
                                                            <td class="el-table_1_column_38 is-center">
                                                                <div class=cell>Полученн.</div></td>
                                                            <td class=gutter></td></tr>
                                                        <tr class="el-table__row el-table__row--striped">
                                                            <td class="el-table_1_column_33 is-center">
                                                                <div class=cell>6</div></td>
                                                            <td class="el-table_1_column_34 is-center">
                                                                <div class=cell>Входящ.</div></td>
                                                            <td class="el-table_1_column_35 is-center">
                                                                <div class=cell>510001</div></td>
                                                            <td class="el-table_1_column_36 is-center">
                                                                <div class=cell>2022-08-31 17:58:43</div></td>
                                                            <td class="el-table_1_column_37 is-center">
                                                                <div class=cell>00:11</div></td>
                                                            <td class="el-table_1_column_38 is-center">
                                                                <div class=cell>Полученн.</div></td>
                                                            <td class=gutter></td></tr>
                                                        <tr class=el-table__row>
                                                            <td class="el-table_1_column_33 is-center">
                                                                <div class=cell>7</div></td>
                                                            <td class="el-table_1_column_34 is-center">
                                                                <div class=cell>Входящ.</div></td>
                                                            <td class="el-table_1_column_35 is-center">
                                                                <div class=cell>6661</div></td>
                                                            <td class="el-table_1_column_36 is-center">
                                                                <div class=cell>2022-08-31 17:58:09</div></td>
                                                            <td class="el-table_1_column_37 is-center">
                                                                <div class=cell>00:10</div></td>
                                                            <td class="el-table_1_column_38 is-center">
                                                                <div class=cell>Полученн.</div></td>
                                                            <td class=gutter></td></tr>
                                                        <tr class="el-table__row el-table__row--striped">
                                                            <td class="el-table_1_column_33 is-center">
                                                                <div class=cell>8</div></td>
                                                            <td class="el-table_1_column_34 is-center">
                                                                <div class=cell>Входящ.</div></td>
                                                            <td class="el-table_1_column_35 is-center">
                                                                <div class=cell>510001</div></td>
                                                            <td class="el-table_1_column_36 is-center">
                                                                <div class=cell>2022-08-31 17:56:44</div></td>
                                                            <td class="el-table_1_column_37 is-center">
                                                                <div class=cell>00:08</div></td>
                                                            <td class="el-table_1_column_38 is-center">
                                                                <div class=cell>Полученн.</div></td>
                                                            <td class=gutter></td></tr>
                                                        <tr class=el-table__row>
                                                            <td class="el-table_1_column_33 is-center">
                                                                <div class=cell>9</div></td>
                                                            <td class="el-table_1_column_34 is-center">
                                                                <div class=cell>Входящ.</div></td>
                                                            <td class="el-table_1_column_35 is-center">
                                                                <div class=cell>6661</div></td>
                                                            <td class="el-table_1_column_36 is-center">
                                                                <div class=cell>2022-08-31 17:55:53</div></td>
                                                            <td class="el-table_1_column_37 is-center">
                                                                <div class=cell>00:12</div></td>
                                                            <td class="el-table_1_column_38 is-center">
                                                                <div class=cell>Полученн.</div></td>
                                                            <td class=gutter></td></tr>
                                                        <tr class="el-table__row el-table__row--striped">
                                                            <td class="el-table_1_column_33 is-center">
                                                                <div class=cell>10</div></td>
                                                            <td class="el-table_1_column_34 is-center">
                                                                <div class=cell>Входящ.</div></td>
                                                            <td class="el-table_1_column_35 is-center">
                                                                <div class=cell>6661</div></td>
                                                            <td class="el-table_1_column_36 is-center">
                                                                <div class=cell>2022-08-31 17:55:22</div></td>
                                                            <td class="el-table_1_column_37 is-center">
                                                                <div class=cell>00:17</div></td>
                                                            <td class="el-table_1_column_38 is-center">
                                                                <div class=cell>Полученн.</div></td>
                                                            <td class=gutter></td></tr>
                                                        <tr class=el-table__row>
                                                            <td class="el-table_1_column_33 is-center">
                                                                <div class=cell>11</div></td>
                                                            <td class="el-table_1_column_34 is-center">
                                                                <div class=cell>Входящ.</div></td>
                                                            <td class="el-table_1_column_35 is-center">
                                                                <div class=cell>510001</div></td>
                                                            <td class="el-table_1_column_36 is-center">
                                                                <div class=cell>2022-08-31 17:47:04</div></td>
                                                            <td class="el-table_1_column_37 is-center">
                                                                <div class=cell>00:26</div></td>
                                                            <td class="el-table_1_column_38 is-center">
                                                                <div class=cell>Полученн.</div></td>
                                                            <td class=gutter></td></tr>
                                                        <tr class="el-table__row el-table__row--striped">
                                                            <td class="el-table_1_column_33 is-center">
                                                                <div class=cell>12</div></td>
                                                            <td class="el-table_1_column_34 is-center">
                                                                <div class=cell>Входящ.</div></td>
                                                            <td class="el-table_1_column_35 is-center">
                                                                <div class=cell>510001</div></td>
                                                            <td class="el-table_1_column_36 is-center">
                                                                <div class=cell>2022-08-31 17:44:51</div></td>
                                                            <td class="el-table_1_column_37 is-center">
                                                                <div class=cell>00:04</div></td>
                                                            <td class="el-table_1_column_38 is-center">
                                                                <div class=cell>Полученн.</div></td>
                                                            <td class=gutter></td></tr>
                                                        <tr class=el-table__row>
                                                            <td class="el-table_1_column_33 is-center">
                                                                <div class=cell>13</div></td>
                                                            <td class="el-table_1_column_34 is-center">
                                                                <div class=cell>Входящ.</div></td>
                                                            <td class="el-table_1_column_35 is-center">
                                                                <div class=cell>6661</div></td>
                                                            <td class="el-table_1_column_36 is-center">
                                                                <div class=cell>2022-08-31 17:44:12</div></td>
                                                            <td class="el-table_1_column_37 is-center">
                                                                <div class=cell>00:24</div></td>
                                                            <td class="el-table_1_column_38 is-center">
                                                                <div class=cell>Полученн.</div></td>
                                                            <td class=gutter></td></tr>
                                                        <tr class="el-table__row el-table__row--striped">
                                                            <td class="el-table_1_column_33 is-center">
                                                                <div class=cell>14</div></td>
                                                            <td class="el-table_1_column_34 is-center">
                                                                <div class=cell>Входящ.</div></td>
                                                            <td class="el-table_1_column_35 is-center">
                                                                <div class=cell>6661</div></td>
                                                            <td class="el-table_1_column_36 is-center">
                                                                <div class=cell>2022-08-31 17:34:29</div></td>
                                                            <td class="el-table_1_column_37 is-center">
                                                                <div class=cell>00:14</div></td>
                                                            <td class="el-table_1_column_38 is-center">
                                                                <div class=cell>Полученн.</div></td>
                                                            <td class=gutter></td></tr>
                                                        <tr class=el-table__row>
                                                            <td class="el-table_1_column_33 is-center">
                                                                <div class=cell>15</div></td>
                                                            <td class="el-table_1_column_34 is-center">
                                                                <div class=cell>Входящ.</div></td>
                                                            <td class="el-table_1_column_35 is-center">
                                                                <div class=cell>6661</div></td>
                                                            <td class="el-table_1_column_36 is-center">
                                                                <div class=cell>2022-08-31 13:01:27</div></td>
                                                            <td class="el-table_1_column_37 is-center">
                                                                <div class=cell>00:47</div></td>
                                                            <td class="el-table_1_column_38 is-center">
                                                                <div class=cell>Полученн.</div></td>
                                                            <td class=gutter></td></tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <div class=el-table__column-resize-proxy style=display:none></div>
                                            <div class=resize-triggers>
                                                <div class=expand-trigger>
                                                    <div style=width:1375px;height:400px></div>
                                                </div>
                                                <div class=contract-trigger></div>
                                            </div>
                                        </div>
                                        <div class="fn-mart20 el-row">
                                            <div
                                                class="el-col el-col-24 el-col-xs-3 el-col-sm-3 el-col-md-4 el-col-lg-2">
                                                <a class=ui-button>Экспорт</a> <a id=exportCall download=call.csv
                                                    style=display:none></a></div>
                                            <div
                                                class="el-col el-col-24 el-col-xs-14 el-col-sm-14 el-col-md-12 el-col-lg-12">
                                                <div class=layout></div>
                                            </div>
                                            <div
                                                class="el-col el-col-24 el-col-xs-7 el-col-sm-7 el-col-md-8 el-col-lg-10">
                                                <div class="clearfloat fn-height20"><span class=Page-inputGo></span>
                                                    <input type=text class=Page-input value> <span class=Page-text>Go
                                                        to</span> <span class=Page-toLast></span> <span
                                                        class=Page-toAfter></span> <span class=Page-Num>14</span> <span
                                                        class=Page-Num>/</span> <span class=Page-Num>1</span> <span
                                                        class=Page-toBefore></span> <span class=Page-toFirst></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="App-alertMessage el-row" style=display:none id=AppAlert></div>
        </div>
        <div id=h5playerContainer
            style="background:rgb(0,0,0) none repeat scroll 0% 0%;position:absolute;top:234.781px;width:335px;height:188.438px;z-index:1790;left:315px;display:none">





        </div>
        <script
            data-template-shadow-root>(() => { document.currentScript.remove(); processNode(document); function processNode(node) { node.querySelectorAll("template[shadowroot]").forEach(element => { let shadowRoot = element.parentElement.shadowRoot; if (!shadowRoot) { try { shadowRoot = element.parentElement.attachShadow({ mode: element.getAttribute("shadowroot") }); shadowRoot.innerHTML = element.innerHTML; element.remove() } catch (error) { } if (shadowRoot) { processNode(shadowRoot) } } }) } })()</script>
        <script
            data-template-shadow-root>(() => { document.currentScript.remove(); const processNode = node => { node.querySelectorAll("template[shadowroot]").forEach(element => { let shadowRoot = getShadowRoot(element.parentElement); if (!shadowRoot) { try { shadowRoot = element.parentElement.attachShadow({ mode: element.getAttribute("shadowroot") }); shadowRoot.innerHTML = element.innerHTML; element.remove(); } catch (error) { } if (shadowRoot) { processNode(shadowRoot); } } }) }; const FORBIDDEN_TAG_NAMES = ["a", "area", "audio", "base", "br", "col", "command", "embed", "hr", "img", "iframe", "input", "keygen", "link", "meta", "param", "source", "track", "video", "wbr"]; const NOTE_TAGNAME = "single-file-note"; const NOTE_CLASS = "note"; const NOTE_ANCHORED_CLASS = "note-anchored"; const NOTE_SELECTED_CLASS = "note-selected"; const NOTE_MOVING_CLASS = "note-moving"; const NOTE_MASK_MOVING_CLASS = "note-mask-moving"; const MASK_CLASS = "single-file-mask"; const HIGHLIGHT_CLASS = "single-file-highlight"; const NOTES_WEB_STYLESHEET = ".note { all: initial; display: flex; flex-direction: column; height: 150px; width: 150px; position: absolute; top: 10px; left: 10px; border: 1px solid rgb(191, 191, 191); z-index: 2147483646; box-shadow: 3px 3px 3px rgba(33, 33, 33, .7); min-height: 100px; min-width: 100px; } .note-selected { z-index: 2147483647; } .note-hidden { display: none; } .note-collapsed { min-height: 30px; max-height: 30px; overflow: hidden; } .note textarea { all: initial; white-space: break-spaces; font-family: Arial, Helvetica, sans-serif; font-size: 14px; padding: 3px; height: 100%; border: 1px solid transparent; resize: none; color: black; } .note textarea:focus { border: 1px dotted rgb(160, 160, 160); } .note header { all: initial; min-height: 30px; cursor: grab; user-select: none; } .note .note-remove { all: initial; position: absolute; right: 0px; top: 2px; padding: 5px; opacity: .5; cursor: pointer; user-select: none; width: 16px; height: 16px; } .note .note-anchor { all: initial; position: absolute; left: 0px; top: 2px; padding: 5px; opacity: .25; cursor: pointer; width: 16px; height: 16px; } .note .note-resize { all: initial; position: absolute; bottom: -5px; right: -5px; height: 15px; width: 15px; cursor: nwse-resize; user-select: none; } .note .note-remove:hover { opacity: 1; } .note .note-anchor:hover { opacity: .5; } .note-anchored .note-anchor { opacity: .5; } .note-anchored .note-anchor:hover { opacity: 1; } .note-moving { opacity: .75; box-shadow: 6px 6px 3px rgba(33, 33, 33, .7); } .note-moving * { cursor: grabbing; } .note-yellow header { background-color: #f5f545; } .note-yellow textarea { background-color: #ffff7c; } .note-pink header { background-color: #ffa59f; } .note-pink textarea { background-color: #ffbbb6; } .note-blue header { background-color: #84c8ff; } .note-blue textarea { background-color: #95d0ff; } .note-green header { background-color: #93ef8d; } .note-green textarea { background-color: #9cff95; }"; const MASK_WEB_STYLESHEET = ".note-mask { all: initial; position: fixed; z-index: 2147483645; pointer-events: none; background-color: transparent; transition: background-color 125ms; } .note-mask-moving.note-yellow { background-color: rgba(255, 255, 124, .3); } .note-mask-moving.note-pink { background-color: rgba(255, 187, 182, .3); } .note-mask-moving.note-blue { background-color: rgba(149, 208, 255, .3); } .note-mask-moving.note-green { background-color: rgba(156, 255, 149, .3); } .page-mask { all: initial; position: fixed; top: 0; left: 0; width: 0; height: 0; z-index: 2147483646; } .page-mask-active { width: 100vw; height: 100vh; }"; const NOTE_HEADER_HEIGHT = 25; const PAGE_MASK_ACTIVE_CLASS = "page-mask-active"; const REMOVED_CONTENT_CLASS = "single-file-removed"; const reflowNotes = function reflowNotes() { document.querySelectorAll(NOTE_TAGNAME).forEach(containerElement => { const noteElement = containerElement.shadowRoot.querySelector("." + NOTE_CLASS); const noteBoundingRect = noteElement.getBoundingClientRect(); const anchorElement = getAnchorElement(containerElement); const anchorBoundingRect = anchorElement.getBoundingClientRect(); const maxX = anchorBoundingRect.x + Math.max(0, anchorBoundingRect.width - noteBoundingRect.width); const minX = anchorBoundingRect.x; const maxY = anchorBoundingRect.y + Math.max(0, anchorBoundingRect.height - NOTE_HEADER_HEIGHT); const minY = anchorBoundingRect.y; let left = parseInt(noteElement.style.getPropertyValue("left")); let top = parseInt(noteElement.style.getPropertyValue("top")); if (noteBoundingRect.x > maxX) { left -= noteBoundingRect.x - maxX; } if (noteBoundingRect.x < minX) { left += minX - noteBoundingRect.x; } if (noteBoundingRect.y > maxY) { top -= noteBoundingRect.y - maxY; } if (noteBoundingRect.y < minY) { top += minY - noteBoundingRect.y; } noteElement.style.setProperty("position", "absolute"); noteElement.style.setProperty("left", left + "px"); noteElement.style.setProperty("top", top + "px"); }); }; const addNoteRef = function addNoteRef(anchorElement, noteId) { const noteRefs = getNoteRefs(anchorElement); noteRefs.push(noteId); setNoteRefs(anchorElement, noteRefs); }; const deleteNoteRef = function deleteNoteRef(containerElement, noteId) { const anchorElement = getAnchorElement(containerElement); const noteRefs = getNoteRefs(anchorElement).filter(noteRefs => noteRefs != noteId); if (noteRefs.length) { setNoteRefs(anchorElement, noteRefs); } else { delete anchorElement.dataset.singleFileNoteRefs; } }; const getNoteRefs = function getNoteRefs(anchorElement) { return JSON.parse("[" + (anchorElement.dataset.singleFileNoteRefs || "") + "]"); }; const setNoteRefs = function setNoteRefs(anchorElement, noteRefs) { anchorElement.dataset.singleFileNoteRefs = noteRefs.toString(); }; const getAnchorElement = function getAnchorElement(containerElement) { return document.querySelector("[data-single-file-note-refs^=" + JSON.stringify(containerElement.dataset.noteId) + "], [data-single-file-note-refs$=" + JSON.stringify(containerElement.dataset.noteId) + "], [data-single-file-note-refs*=" + JSON.stringify("," + containerElement.dataset.noteId + ",") + "]") || document.documentElement; }; const getMaskElement = function getMaskElement(className, containerClassName) { let maskElement = document.documentElement.querySelector("." + className); if (!maskElement) { maskElement = document.createElement("div"); const maskContainerElement = document.createElement("div"); if (containerClassName) { maskContainerElement.classList.add(containerClassName); } maskContainerElement.classList.add(MASK_CLASS); const firstNote = document.querySelector(NOTE_TAGNAME); if (firstNote && firstNote.parentElement == document.documentElement) { document.documentElement.insertBefore(maskContainerElement, firstNote); } else { document.documentElement.appendChild(maskContainerElement); } maskElement.classList.add(className); const maskShadow = maskContainerElement.attachShadow({ mode: "open" }); maskShadow.appendChild(getStyleElement(MASK_WEB_STYLESHEET)); maskShadow.appendChild(maskElement); return maskElement; } }; const getStyleElement = function getStyleElement(stylesheet) { const linkElement = document.createElement("style"); linkElement.textContent = stylesheet; return linkElement; }; const attachNoteListeners = function attachNoteListeners(containerElement, editable = false) { const SELECT_PX_THRESHOLD = 4; const COLLAPSING_NOTE_DELAY = 750; const noteShadow = containerElement.shadowRoot; const noteElement = noteShadow.childNodes[1]; const headerElement = noteShadow.querySelector("header"); const mainElement = noteShadow.querySelector("textarea"); const noteId = containerElement.dataset.noteId; const resizeElement = noteShadow.querySelector(".note-resize"); const anchorIconElement = noteShadow.querySelector(".note-anchor"); const removeNoteElement = noteShadow.querySelector(".note-remove"); mainElement.readOnly = !editable; if (!editable) { anchorIconElement.style.setProperty("display", "none", "important"); } else { anchorIconElement.style.removeProperty("display"); } headerElement.ontouchstart = headerElement.onmousedown = event => { if (event.target == headerElement) { collapseNoteTimeout = setTimeout(() => { noteElement.classList.toggle("note-collapsed"); hideMaskNote(); }, COLLAPSING_NOTE_DELAY); event.preventDefault(); const position = getPosition(event); const clientX = position.clientX; const clientY = position.clientY; const boundingRect = noteElement.getBoundingClientRect(); const deltaX = clientX - boundingRect.left; const deltaY = clientY - boundingRect.top; maskPageElement.classList.add(PAGE_MASK_ACTIVE_CLASS); document.documentElement.style.setProperty("user-select", "none", "important"); anchorElement = getAnchorElement(containerElement); displayMaskNote(); selectNote(noteElement); moveNote(event, deltaX, deltaY); movingNoteMode = { event, deltaX, deltaY }; document.documentElement.ontouchmove = document.documentElement.onmousemove = event => { clearTimeout(collapseNoteTimeout); if (!movingNoteMode) { movingNoteMode = { deltaX, deltaY }; } movingNoteMode.event = event; moveNote(event, deltaX, deltaY); }; } }; resizeElement.ontouchstart = resizeElement.onmousedown = event => { event.preventDefault(); resizingNoteMode = true; selectNote(noteElement); maskPageElement.classList.add(PAGE_MASK_ACTIVE_CLASS); document.documentElement.style.setProperty("user-select", "none", "important"); document.documentElement.ontouchmove = document.documentElement.onmousemove = event => { event.preventDefault(); const { clientX, clientY } = getPosition(event); const boundingRectNote = noteElement.getBoundingClientRect(); noteElement.style.width = clientX - boundingRectNote.left + "px"; noteElement.style.height = clientY - boundingRectNote.top + "px"; }; }; anchorIconElement.ontouchend = anchorIconElement.onclick = event => { event.preventDefault(); noteElement.classList.toggle(NOTE_ANCHORED_CLASS); if (!noteElement.classList.contains(NOTE_ANCHORED_CLASS)) { deleteNoteRef(containerElement, noteId); addNoteRef(document.documentElement, noteId); } onUpdate(false); }; removeNoteElement.ontouchend = removeNoteElement.onclick = event => { event.preventDefault(); deleteNoteRef(containerElement, noteId); containerElement.remove(); }; noteElement.onmousedown = () => { selectNote(noteElement); }; function moveNote(event, deltaX, deltaY) { event.preventDefault(); const { clientX, clientY } = getPosition(event); noteElement.classList.add(NOTE_MOVING_CLASS); if (editable) { if (noteElement.classList.contains(NOTE_ANCHORED_CLASS)) { deleteNoteRef(containerElement, noteId); anchorElement = getTarget(clientX, clientY) || document.documentElement; addNoteRef(anchorElement, noteId); } else { anchorElement = document.documentElement; } } document.documentElement.insertBefore(containerElement, maskPageElement.getRootNode().host); noteElement.style.setProperty("left", (clientX - deltaX) + "px"); noteElement.style.setProperty("top", (clientY - deltaY) + "px"); noteElement.style.setProperty("position", "fixed"); displayMaskNote(); } function displayMaskNote() { if (anchorElement == document.documentElement || anchorElement == document.documentElement) { hideMaskNote(); } else { const boundingRectAnchor = anchorElement.getBoundingClientRect(); maskNoteElement.classList.add(NOTE_MASK_MOVING_CLASS); if (selectedNote) { maskNoteElement.classList.add(selectedNote.dataset.color); } maskNoteElement.style.setProperty("top", (boundingRectAnchor.y - 3) + "px"); maskNoteElement.style.setProperty("left", (boundingRectAnchor.x - 3) + "px"); maskNoteElement.style.setProperty("width", (boundingRectAnchor.width + 3) + "px"); maskNoteElement.style.setProperty("height", (boundingRectAnchor.height + 3) + "px"); } } function hideMaskNote() { maskNoteElement.classList.remove(NOTE_MASK_MOVING_CLASS); if (selectedNote) { maskNoteElement.classList.remove(selectedNote.dataset.color); } } function selectNote(noteElement) { if (selectedNote) { selectedNote.classList.remove(NOTE_SELECTED_CLASS); maskNoteElement.classList.remove(selectedNote.dataset.color); } noteElement.classList.add(NOTE_SELECTED_CLASS); noteElement.classList.add(noteElement.dataset.color); selectedNote = noteElement; } function getTarget(clientX, clientY) { const targets = Array.from(document.elementsFromPoint(clientX, clientY)).filter(element => element.matches("html *:not(" + NOTE_TAGNAME + "):not(." + MASK_CLASS + ")")); if (!targets.includes(document.documentElement)) { targets.push(document.documentElement); } let newTarget, target = targets[0], boundingRect = target.getBoundingClientRect(); newTarget = determineTargetElement("floor", target, clientX - boundingRect.left, getMatchedParents(target, "left")); if (newTarget == target) { newTarget = determineTargetElement("ceil", target, boundingRect.left + boundingRect.width - clientX, getMatchedParents(target, "right")); } if (newTarget == target) { newTarget = determineTargetElement("floor", target, clientY - boundingRect.top, getMatchedParents(target, "top")); } if (newTarget == target) { newTarget = determineTargetElement("ceil", target, boundingRect.top + boundingRect.height - clientY, getMatchedParents(target, "bottom")); } target = newTarget; while (boundingRect = target && target.getBoundingClientRect(), boundingRect && boundingRect.width <= SELECT_PX_THRESHOLD && boundingRect.height <= SELECT_PX_THRESHOLD) { target = target.parentElement; } return target; } function getMatchedParents(target, property) { let element = target, matchedParent, parents = []; do { const boundingRect = element.getBoundingClientRect(); if (element.parentElement && !element.parentElement.tagName.toLowerCase() != NOTE_TAGNAME && !element.classList.contains(MASK_CLASS)) { const parentBoundingRect = element.parentElement.getBoundingClientRect(); matchedParent = Math.abs(parentBoundingRect[property] - boundingRect[property]) <= SELECT_PX_THRESHOLD; if (matchedParent) { if (element.parentElement.clientWidth > SELECT_PX_THRESHOLD && element.parentElement.clientHeight > SELECT_PX_THRESHOLD && ((element.parentElement.clientWidth - element.clientWidth > SELECT_PX_THRESHOLD) || (element.parentElement.clientHeight - element.clientHeight > SELECT_PX_THRESHOLD))) { parents.push(element.parentElement); } element = element.parentElement; } } else { matchedParent = false; } } while (matchedParent && element); return parents; } function determineTargetElement(roundingMethod, target, widthDistance, parents) { if (Math[roundingMethod](widthDistance / SELECT_PX_THRESHOLD) <= parents.length) { target = parents[parents.length - Math[roundingMethod](widthDistance / SELECT_PX_THRESHOLD) - 1]; } return target; } }; const anchorNote = function anchorNote(event, noteElement, deltaX, deltaY) { event.preventDefault(); const { clientX, clientY } = getPosition(event); document.documentElement.style.removeProperty("user-select"); noteElement.classList.remove(NOTE_MOVING_CLASS); maskNoteElement.classList.remove(NOTE_MASK_MOVING_CLASS); maskPageElement.classList.remove(PAGE_MASK_ACTIVE_CLASS); maskNoteElement.classList.remove(noteElement.dataset.color); const headerElement = noteElement.querySelector("header"); headerElement.ontouchmove = document.documentElement.onmousemove = null; let currentElement = anchorElement; let positionedElement; while (currentElement.parentElement && !positionedElement) { if (!FORBIDDEN_TAG_NAMES.includes(currentElement.tagName.toLowerCase())) { const currentElementStyle = getComputedStyle(currentElement); if (currentElementStyle.position != "static") { positionedElement = currentElement; } } currentElement = currentElement.parentElement; } if (!positionedElement) { positionedElement = document.documentElement; } const containerElement = noteElement.getRootNode().host; if (positionedElement == document.documentElement) { const firstMaskElement = document.querySelector("." + MASK_CLASS); firstMaskElement.parentElement.insertBefore(containerElement, firstMaskElement); } else { positionedElement.appendChild(containerElement); } const boundingRectPositionedElement = positionedElement.getBoundingClientRect(); const stylePositionedElement = window.getComputedStyle(positionedElement); const borderX = parseInt(stylePositionedElement.getPropertyValue("border-left-width")); const borderY = parseInt(stylePositionedElement.getPropertyValue("border-top-width")); noteElement.style.setProperty("position", "absolute"); noteElement.style.setProperty("left", (clientX - boundingRectPositionedElement.x - deltaX - borderX) + "px"); noteElement.style.setProperty("top", (clientY - boundingRectPositionedElement.y - deltaY - borderY) + "px"); }; const getPosition = function getPosition(event) { if (event.touches && event.touches.length) { const touch = event.touches[0]; return touch; } else { return event; } }; const onMouseUp = function onMouseUp(event) { if (highlightSelectionMode) { highlightSelection(); onUpdate(false); } if (removeHighlightMode) { let element = event.target, done; while (element && !done) { if (element.classList.contains(HIGHLIGHT_CLASS)) { document.querySelectorAll("." + HIGHLIGHT_CLASS + "[data-singlefile-highlight-id=" + JSON.stringify(element.dataset.singlefileHighlightId) + "]").forEach(highlightedElement => { resetHighlightedElement(highlightedElement); onUpdate(false); }); done = true; } element = element.parentElement; } } if (resizingNoteMode) { resizingNoteMode = false; document.documentElement.style.removeProperty("user-select"); maskPageElement.classList.remove(PAGE_MASK_ACTIVE_CLASS); document.documentElement.ontouchmove = document.documentElement.onmousemove = null; onUpdate(false); } if (movingNoteMode) { anchorNote(movingNoteMode.event || event, selectedNote, movingNoteMode.deltaX, movingNoteMode.deltaY); movingNoteMode = null; document.documentElement.ontouchmove = document.documentElement.onmousemove = null; onUpdate(false); } if (collapseNoteTimeout) { clearTimeout(collapseNoteTimeout); collapseNoteTimeout = null; } if ((cuttingMode || cuttingOuterMode) && cuttingPath) { if (event.ctrlKey) { const element = cuttingPath[cuttingPathIndex]; element.classList.toggle(cuttingMode ? CUT_SELECTED_CLASS : CUT_OUTER_SELECTED_CLASS); } else { validateCutElement(event.shiftKey); } } }; const getShadowRoot = function getShadowRoot(element) { const chrome = window.chrome; if (element.openOrClosedShadowRoot) { return element.openOrClosedShadowRoot; } else if (chrome && chrome.dom && chrome.dom.openOrClosedShadowRoot) { try { return chrome.dom.openOrClosedShadowRoot(element); } catch (error) { return element.shadowRoot; } } else { return element.shadowRoot; } }; const maskNoteElement = getMaskElement("note-mask"); const maskPageElement = getMaskElement("page-mask", "single-file-page-mask"); let selectedNote, highlightSelectionMode, removeHighlightMode, resizingNoteMode, movingNoteMode, collapseNoteTimeout, cuttingMode, cuttingOuterMode; window.onresize = reflowNotes; window.onUpdate = () => { }; document.documentElement.onmouseup = document.documentElement.ontouchend = onMouseUp; window.addEventListener("DOMContentLoaded", () => { processNode(document); reflowNotes(); document.querySelectorAll("single-file-note").forEach(noteElement => attachNoteListeners(noteElement)); }); })()</script>
        <style>
            .single-file-highlight-yellow,
            .single-file-highlight-yellow-mode ::selection {
                background-color: #ffff7c !important;
                color: black !important;
            }

            .single-file-highlight-pink,
            .single-file-highlight-pink-mode ::selection {
                background-color: #ffbbb6 !important;
                color: black !important;
            }

            .single-file-highlight-blue,
            .single-file-highlight-blue-mode ::selection {
                background-color: #95d0ff !important;
                color: black !important;
            }

            .single-file-highlight-green,
            .single-file-highlight-green-mode ::selection {
                background-color: #93ef8d !important;
                color: black !important;
            }

            span.single-file-highlight-yellow,
            span.single-file-highlight-pink,
            span.single-file-highlight-blue,
            span.single-file-highlight-green {
                display: inline !important;
            }

            .single-file-highlight-hidden {
                background-color: inherit !important;
                color: inherit !important;
            }

            .single-file-mask {
                all: initial;
                display: contents !important;
            }

            .single-file-mask.single-file-page-mask {
                opacity: .99 !important;
            }

            single-file-note {
                all: initial !important;
                display: contents !important;
            }

            .single-file-cut-hover,
            .single-file-cut-outer-hover,
            .single-file-cut-selected,
            .single-file-cut-outer-selected {
                transition: outline-width 125ms !important;
                outline-offset: -4px !important;
                outline-width: 4px !important;
            }

            .single-file-cut-hover,
            .single-file-cut-outer-hover {
                outline-style: dotted !important;
            }

            .single-file-cut-selected,
            .single-file-cut-outer-selected {
                outline-style: dashed !important;
            }

            .single-file-cut-hover,
            .single-file-cut-selected {
                outline-color: red !important;
            }

            .single-file-cut-outer-hover,
            .single-file-cut-outer-selected {
                outline-color: green !important;
            }

            .single-file-cut-mode,
            .single-file-cut-mode * {
                pointer-events: auto !important;
            }

            .single-file-cut-hover,
            .single-file-cut-outer-hover,
            .single-file-remove-highlights-mode .single-file-highlight:hover {
                cursor: crosshair !important;
            }

            .single-file-removed {
                display: none !important;
                float: none !important;
                position: static !important;
                visibility: collapse !important;
            }
        </style>
    </div>
</div>